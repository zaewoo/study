## 식별자(Identifiers).

### 1. 식별자 개념.
하나의 엔터티에 구성되어 있는 여러 개의 속성 중에 엔터티를 대표할 수 있는 속성을 의미하며 하나의 엔터티는 반드시 하나의 유일한 식별자가 존재해야 한다. 

### 2. 식별자의 특징.
주 식별자는 다음과 같은 특징을 갖는다.

![image](https://user-images.githubusercontent.com/97165359/196600912-e1861a4a-d2c3-4884-b2fb-1e82d6a8bc3a.png)

- 유일성: 엔터티 내의 모든 인스턴스들이 주 식별자에 의해 유일하게 구분되어야 한다.
- 최소성: 주 식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.
- 불변성: 지정된 주 식별자의 값은 자주 변하지 않는 것이어야 한다.
- 존재성: 주 식별자가 지정이 되면 반드시 값이 들어와야 한다. 

대체 식별자의 특징은 주 식별자의 특징과 일치하지만 외부 식별자는 별도의 특징을 가지고 있다. 외부 식별자의 경우 주 식별자의 특징과 일치하지 않으며 참조무결성 제약조건(Referential Integrity)에 따른 특징을 가지고 있다. 

### 3. 식별자 분류 
식별자의 종류는 자신의 엔터티 내에서 대표성을 가지는가에 따라 주 식별자(Primary Identifier)와 보조 식별자(Alternate Identifier)로 구분하고 엔터티 내에서 스스로 생성되었는지 여부에 따라 내부 식별자와 외부 식별자로 구분할 수 있다. 또한 단일 속성으로 식별이 되는가에 따라 단일 식별자(Single Identifer)와 복합 식별자(Composit Identifier)로 구분할 수 있다. 원래 업무적으로 의미가 있던 속성을 대체하여 일련번호와 같이 새롭게 만든 식별자를 구분하기 위해 본 식별자와 인조 식별자로도 구분할 수 있다. 

![image](https://user-images.githubusercontent.com/97165359/196601660-4ffb104a-c680-4462-8b60-d1d9db0a4a65.png)

### 4. 주 식별자 도출 기준.
데이터 모델링 작업에서 중요한 작업 중의 하나가 주 식별자 도출 작업이다. 주 식별자를 도출하기 위한 기준을 정리하면 다음과 같다. 

- 해당 업무에서 자주 이용되는 속성을 주 식별자로 지정한다.
- 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주 식별자로 지정하지 않는다.
- 복합으로 주 식별자로 구성할 경우 너무 많은 속성이 포함되지 않도록 한다.

### 5. 식별자 관계와 비 식별자 관계에 따른 식별자.
#### 가. 식별자 관계와 비 식별자 관계의 결정.
외부 식별자(Foreign Identifier)는 자기 자신의 엔터티에서 필요한 속성이 아니라 다른 엔터티와의 관계를 통해 자식 쪽에 엔터티에 생성되는 속성을 외부 식별자라 하며 데이터베이스 생성 시에 Foreign Key 역할을 한다. 관계와 속성을 정의하고 주 식별자를 정의하면 논리적인 관계에 의해 자연스럽게 외부식별자가 도출되지만 중요하게 고려해야 할 사항이 있다. 엔터티에 주 식별자가 지정되고 엔터티 간 관계를 연결하면 부모 쪽의 주 식별자를 자식 엔터티의 속성으로 내려 보낸다. 이 때 자식 엔터티에서 부모 엔터티로부터 받은 외부 식별자를 자신의 주 식별자로 이용할 것인지 또는 부모와 연겯뢰는 속성으로서만 이용할 것인지를 결정해야 한다. 

#### 나. 식별자 관계.
부모로부터 받은 식별자를 자식 엔터티의 주 식별자로 이용하는 경우는 결측값이 오면 안되므로 반드시 부모 엔터티가 생성되어야 자기 자신의 엔터티가 생성되는 경우이다. 부모로부터 받은 속성을 자식 엔터티가 모두 사용하고 그것만으로 주 식별자로 사용한다면 부모 엔터티와 자식 엔터티의 관계는 1:1의 관계가 될 것이고 만약 부모로부터 받은 속성을 포함하여 다른 부모 엔터티에서 받은 속성을 포함하거나 스스로 가지고 있는 속성과 함께 주 식별자로 구성되는 경우는 1:M 관계가 된다. 자식 엔터티의 주 식별자로 부모의 주 식별자가 상속이 되는 경우를 식별자 관계(Identifying Relationship)라고 지칭한다.

#### 다. 비식별자 관계.
부모 엔터티로부터 속성을 받았지만 자식 엔터티의 주 식별자로 사용하지 않고 일반적인 속성으로만 사용하는 경우가 있다. 이와 같은 경우를 비 식별자 관계(NON-Identifying Relationship)라고 하며 다음의 네 가지 경우에 비 식별자 관계에 의한 외부 속성을 생성한다. 

- 자식 엔터티에서 받은 속성이 반드시 필수가 아니어도 무방하기 때문에 부모 없는 자식이 생성될 수 있는 경우이다.
- 엔터티 별로 데이터의 생명주기를 다르게 관리할 경우이다. 예를 들어 부모 엔터티에 인스턴스가 자식의 엔터티와 관계를 가지고 있었지만 자식만 남겨두고 먼저 소멸될 수 있는 경우가 이에 해당한다. 이에 대한 방안으로 물리 데이터베이스 생성 시 Foreign Key를 연결하지 않는 임시적인 방법을 사용하기도 하지만 데이터 모델상에서 관계를 비식별자 관계로 조정하는 것이 가장 좋은 방법이다. 
- 여러 개의 엔터티가 하나의 엔터티로 통합되어 표현되었는데 각각의 엔터티가 별도의 관계를 가질 때이며 이에 해당된다. 
- 자식 엔터티에 주 식별자로 사용하여도 되지만 자식 엔터티에서 별도의 주 식별자를 생성하는 것이 더 유리하다고 판단될 때 비 식별자 관계에 의한 외부 식별자로 표현한다.

#### 라. 식별자 관계로만 설정할 경우의 문제점.
식별자 관계만으로 연결된 데이터 모델의 특징은 주 식별자 속성이 지속적으로 증가할 수 밖에 없는 구조로서 개발자 복잡성과 오류 가능성을 유발시킬 수 있는 요인이 될 수 있다.

#### 마. 비 식별자 관계로만 설정할 경우의 문제점.
데이터 모델링을 전개할 때 각 엔터티 간의 관계를 비 식별자 관계로 설정하면 일부 유형의 속성이 자식 엔터티로 상속되지 않아 자식 엔터티에서 데이터를 처리할 때 쓸데없이 부모 엔터티까지 찾아가야 하는 경우가 발생한다. 

